\RequirePackage{sty/swa-platform}
% packages
\RequirePackage{textcomp}
\RequirePackage{textcase}
\RequirePackage{relsize}

\ifthenelse{\boolean{luatex}}{%
  \RequirePackage[final]{microtype}[2013/05/23]
}{
  \RequirePackage[final]{microtype}[2013/05/23]
}

%
% engine-dependent, eg, encoding, loading.
%
\ifthenelse{\boolean{luatex} \or \boolean{xetex}}{%
  \RequirePackage{fontspec}
  % \newfontfeature{Microtype}{protrusion=default;expansion=default;}
}{
  \RequirePackage{fontaxes}
}


\expandafter%
\RequirePackage{sty/swa-font-\@swa@font}


%
% microtypesetup
%
\ifthenelse{\boolean{xetex}}{%
  \let\textls\undefined
  \DeclareRobustCommand{\textls}[2][80]{%
    {{\addfontfeature{LetterSpace=\the\numexpr#1/10\relax}#2}}}
}{}

\ifthenelse{\boolean{xetex}\OR\boolean{luatex}}{
  \microtypesetup{stretch=9,shrink=15,step=3}
}{
  \microtypesetup{stretch=9,shrink=15,step=3,tracking=smallcaps,letterspace=75}
}

%
% useful commands
%
\DeclareRobustCommand{\spacedallcaps}[1]{%
  \textls[80]{\MakeTextUppercase{#1}}}%
\DeclareRobustCommand{\spacedlowsmallcaps}[1]{%
  {\scshape\MakeTextLowercase{#1}}}%s
\DeclareRobustCommand\Largespacedlowsmallcaps[1]{%
  \spacedlowsmallcaps{\Large #1}}


%
